--P12-6
CREATE TABLE EMP_ALTER
AS
SELECT*FROM EMP;

SELECT*FROM EMP_ALTER;

ALTER TABLE EMP_ALTER
ADD HP VARCHAR2(20);

ALTER TABLE EMP_ALTER
RENAME COLUMN HP TO TEL;

ALTER TABLE EMP_ALTER
MODIFY EMPNO NUMBER(5);

DESC EMP_ALTER;

ALTER TABLE EMP_ALTER
DROP COLUMN TEL;

RENAME EMP_ALTER TO EMP_RENAME;

DESC EMP_ALTER;
DESC EMP_RENAME;

DROP TABLE EMP_RENAME;


--Q1

CREATE TABLE EMP_HW(
        EMPNO   NUMBER(4),
        ENAME   VARCHAR2(10),
        JOB     VARCHAR2(9),
        MGR     NUMBER(4),
        HIREDATE DATE,
        SAL     NUMBER(7,2),
        COMM    NUMBER(7,2),
        DEPTNO  NUM0BER(2)
        );

SELECT*FROM EMP_HW;
DESC EMP_HW;

ALTER TABLE EMP_HW
ADD BIGO VARCHAR2(20);
        
ALTER TABLE EMP_HW
MODIFY BIGO VARCHAR2(30);
        
ALTER TABLE EMP_HW
RENAME COLUMN BIGO TO REMARK;
        
INSERT INTO EMP_HW(EMPNO,ENAME,JOB,MGR,HIREDATE,SAL,COMM,DEPTNO)
SELECT EMPNO,ENAME,JOB,MGR,HIREDATE,SAL,COMM,DEPTNO
FROM EMP;
        
DROP TABLE EMP_HW; 
        
        
--P13-15
CREATE VIEW VW_EMP20
AS(SELECT EMPNO,ENAME,JOB,DEPTNO
    FROM EMP
    WHERE DEPTNO = 20);
    
SELECT*FROM USER_VIEWS;

SELECT*
FROM VW_EMP20;

DROP VIEW VW_EMP20;

--P13-20
SELECT ROWNUM, E.*
FROM (SELECT*
    FROM EMP E
    ORDER BY SAL DESC) E
WHERE ROWNUM <=3;

--SEQUENCE

CREATE TABLE DEPT_SEQUENCE
AS
SELECT*
FROM DEPT
WHERE 1<>1;

SELECT*FROM DEPT_SEQUENCE;

CREATE SEQUENCE SEQ_DEPT_SEQUENCE
    INCREMENT BY 10
    START WITH 10
    MAXVALUE 90
    MINVALUE 0
    NOCYCLE
    CACHE 2;
    
SELECT* FROM USER_SEQUENCES;

INSERT INTO DEPT_SEQUENCE (DEPTNO, DNAME, LOC)
VALUES (SEQ_DEPT_SEQUENCE.NEXTVAL, 'DATABASE','SEOUL');

SELECT*FROM DEPT_SEQUENCE ORDER BY DEPTNO;

SELECT SEQ_DEPT_SEQUENCE.CURRVAL
FROM DUAL;

ALTER SEQUENCE SEQ_DEPT_SEQUENCE
INCREMENT BY 3
MAXVALUE 99
CYCLE;

DROP SEQUENCE SEQ_DEPT_SEQUENCE;
        
UPDATE DEPT_SEQUENCE
SET DEPTNO = SEQ_DEPT_SEQUENCE.NEXTVAL;
        
        
--동의어
CREATE SYNONYM E
FOR EMP;

SELECT* FROM E;

DROP SYNONYM E;
        
    
    
--Q1

CREATE TABLE EMPIDX
AS
SELECT*
FROM EMP;

CREATE INDEX IDX_EMPIDX_EMPNO
ON EMPIDX(EMPNO);

SELECT*
FROM USER_IND_COLUMNS;

--Q2

CREATE VIEW EMPIDX_OVER15K(EMPNO, ENAME, JOB, DEPTNO, SAL, COMM)
AS 
SELECT EMPNO, ENAME, JOB, DEPTNO, SAL, NVL2(COMM,'O','X')
FROM EMPIDX
WHERE SAL>1500;

SELECT* FROM EMPIDX_OVER15K;

DROP VIEW EMPIDX_OVER15K;


--Q3
CREATE TABLE DEPTSEQ
AS
SELECT*
FROM DEPT
WHERE 1<>1;

SELECT * FROM DEPTSEQ;

CREATE SEQUENCE SEQ_DEPTSEQ
START WITH 1
INCREMENT BY 1
MAXVALUE 99
MINVALUE 1
NOCYCLE
NOCACHE;

SELECT* FROM USER_SEQUENCES;

INSERT INTO DEPTSEQ(DEPTNO,DNAME,LOC)
VALUES (SEQ_DEPTSEQ.NEXTVAL, 'DATABASE','SEOUL');

INSERT INTO DEPTSEQ(DEPTNO,DNAME,LOC)
VALUES (SEQ_DEPTSEQ.NEXTVAL, 'WEB','BUSAN');

INSERT INTO DEPTSEQ(DEPTNO,DNAME,LOC)
VALUES (SEQ_DEPTSEQ.NEXTVAL, 'MOBILE','ILSAN');























        
        
        